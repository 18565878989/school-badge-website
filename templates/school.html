{% extends "base.html" %}

{% block title %}{{ school.name }} - æ ¡å¾½ç½‘{% endblock %}

{% block content %}
<!-- Optimized Header Section -->
<div class="detail-header" style="max-width: 1200px; margin: 0 auto; padding: 32px 40px 0; font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', 'Segoe UI', Roboto, sans-serif;">
    <!-- Consistent Navigation - Same as Homepage -->
    <div class="breadcrumb-nav" style="display: flex; align-items: center; gap: 12px; margin-bottom: 24px; flex-wrap: wrap;">
        <a href="{{ url_for('index') }}" style="display: flex; align-items: center; gap: 6px; color: var(--text-secondary); text-decoration: none; font-size: 0.9rem; font-weight: 500; transition: all 0.2s;">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg>
            {{ _('home') }}
        </a>
        {% if session.get('user_id') %}
        <span style="color: var(--text-tertiary);">/</span>
        <a href="{{ url_for('my_likes') }}" style="display: flex; align-items: center; gap: 6px; color: var(--text-secondary); text-decoration: none; font-size: 0.9rem; font-weight: 500; transition: all 0.2s;">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/></svg>
            {{ _('my_likes') }}
        </a>
        {% if is_admin() %}
        <span style="color: var(--text-tertiary);">/</span>
        <a href="{{ url_for('admin_dashboard') }}" style="display: flex; align-items: center; gap: 6px; color: var(--text-secondary); text-decoration: none; font-size: 0.9rem; font-weight: 500; transition: all 0.2s;">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="3"/><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"/></svg>
            {{ _('admin_panel') }}
        </a>
        {% endif %}
        <span style="color: var(--text-tertiary);">/</span>
        <a href="{{ url_for('logout') }}" style="display: flex; align-items: center; gap: 6px; color: var(--text-secondary); text-decoration: none; font-size: 0.9rem; font-weight: 500; transition: all 0.2s;">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/><polyline points="16 17 21 12 16 7"/><line x1="21" y1="12" x2="9" y2="12"/></svg>
            {{ _('logout') }}
        </a>
        {% endif %}
    </div>
    
    <!-- School Title with Premium Logo -->
    <div style="display: flex; align-items: center; gap: 20px; flex-wrap: wrap;">
        <!-- Premium Logo Badge -->
        <div style="width: 64px; height: 64px; background: linear-gradient(135deg, #1E3A5F 0%, #0D2137 100%); border-radius: 18px; display: flex; align-items: center; justify-content: center; box-shadow: 0 8px 24px rgba(30, 58, 95, 0.3); flex-shrink: 0; min-width: 64px;">
            {% if school.badge_url %}
                <img src="{{ school.badge_url }}" alt="{{ school.name }} badge" style="width: 40px; height: 40px; object-fit: contain; filter: brightness(0) invert(1);">
            {% else %}
                <span style="font-size: 1.8rem;">ðŸŽ“</span>
            {% endif %}
        </div>
        
        <!-- School Title Info -->
        <div style="flex: 1; min-width: 200px;">
            <div style="display: flex; align-items: center; gap: 12px; flex-wrap: wrap; margin-bottom: 8px;">
                <h1 style="font-size: clamp(1.2rem, 4vw, 1.6rem); font-weight: 700; color: var(--text); letter-spacing: -0.02em;">{{ school.name }}</h1>
                <span style="display: inline-flex; align-items: center; gap: 6px; padding: 6px 14px; border-radius: 20px; font-size: 0.7rem; font-weight: 700; text-transform: uppercase; background: linear-gradient(135deg, #1E3A5F 0%, #2E5A8F 100%); color: white; box-shadow: 0 4px 12px rgba(30, 58, 95, 0.3);">
                    {% if school.level == 'university' %}
                        <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 10v6M2 10l10-5 10 5-10 5z"/><path d="M6 12v5c0 2 2 3 6 3s6-1 6-3v-5"/></svg>
                        {{ _('university') }}
                    {% elif school.level == 'middle' %}
                        <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="18" height="18" rx="2"/><path d="M3 9h18"/></svg>
                        {{ _('middle_school') }}
                    {% elif school.level == 'elementary' %}
                        <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 3L2 7l10 5 10-5-10-3z"/><path d="M2 17l10 5 10-5"/><path d="M2 12l10 5 10-5"/></svg>
                        {{ _('elementary_school') }}
                    {% elif school.level == 'kindergarten' %}
                        <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="M8 14s1.5 2 4 2 4-2 4-2"/></svg>
                        {{ _('kindergarten') }}
                    {% else %}
                        {{ school.level }}
                    {% endif %}
                </span>
            </div>
            {% if school.name_cn %}
                <p style="font-size: clamp(0.85rem, 2vw, 0.95rem); color: var(--text-secondary);">{{ school.name_cn }}</p>
            {% endif %}
            <p style="font-size: 0.9rem; color: var(--text-secondary); margin-top: 8px; display: flex; align-items: center; gap: 8px;">
                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/><circle cx="12" cy="10" r="3"/></svg>
                {{ school.city }}, {{ school.country }}
            </p>
        </div>
        
        <!-- Quick Actions -->
        <div style="display: flex; gap: 12px; flex-wrap: wrap;">
            {% if session.get('user_id') %}
                <form action="{{ url_for('toggle_like', school_id=school.id) }}" method="POST">
                    <button type="submit" class="btn {% if user_liked %}btn-primary{% else %}btn-secondary{% endif %}" style="display: flex; align-items: center; gap: 8px; padding: 10px 18px; border-radius: 14px; font-weight: 600; transition: all 0.25s ease;" onmouseover="this.style.transform='translateY(-2px)';" onmouseout="this.style.transform='translateY(0)';">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="{% if user_liked %}currentColor{% else %}none{% endif %}" stroke="currentColor" stroke-width="2"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/></svg>
                        {% if user_liked %}{{ _('liked') }}{% else %}{{ _('like') }}{% endif %}
                    </button>
                </form>
            {% endif %}
            <button class="btn btn-secondary" onclick="downloadBadge()" style="display: flex; align-items: center; gap: 8px; padding: 10px 18px; border-radius: 14px; font-weight: 600; transition: all 0.25s ease;" onmouseover="this.style.transform='translateY(-2px)';" onmouseout="this.style.transform='translateY(0)';">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>
                {{ _('download') }}
            </button>
        </div>
    </div>
</div>

<!-- Main Content -->
<div style="max-width: 1200px; margin: 0 auto; padding: 24px 40px 60px; font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', 'Segoe UI', Roboto, sans-serif;">
    <!-- Hero Card -->
    <div class="school-hero" style="background: linear-gradient(135deg, #ffffff 0%, #fafafa 100%); border-radius: 32px; overflow: hidden; box-shadow: 0 4px 24px rgba(0,0,0,0.04), 0 1px 2px rgba(0,0,0,0.02), 0 0 0 1px rgba(0,0,0,0.04); display: grid; grid-template-columns: 400px 1fr; transition: all 0.4s cubic-bezier(0.25, 0.1, 0.25, 1);">
        
        <!-- Badge Section -->
        <div style="background: linear-gradient(180deg, #ffffff 0%, #f5f5f7 100%); padding: 60px; display: flex; flex-direction: column; align-items: center; justify-content: center; position: relative;">
            <div style="position: absolute; top: 60px; right: 0; bottom: 60px; width: 1px; background: linear-gradient(180deg, transparent 0%, rgba(0,0,0,0.08) 20%, rgba(0,0,0,0.08) 80%, transparent 100%);"></div>
            {% if school.badge_url %}
                <img src="{{ school.badge_url }}" alt="{{ school.name }} badge" class="badge-image" style="width: 240px; height: 240px; object-fit: contain; filter: drop-shadow(0 8px 32px rgba(30, 58, 95, 0.12)); margin-bottom: 32px; transition: all 0.4s cubic-bezier(0.25, 0.1, 0.25, 1); cursor: pointer;" onmouseover="this.style.transform='scale(1.05) translateY(-4px)'; this.style.filter='drop-shadow(0 16px 48px rgba(30, 58, 95, 0.2))';" onmouseout="this.style.transform='scale(1) translateY(0)'; this.style.filter='drop-shadow(0 8px 32px rgba(30, 58, 95, 0.12))';">
            {% else %}
                <div style="width: 200px; height: 200px; background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%); border-radius: 48px; display: flex; align-items: center; justify-content: center; font-size: 5rem; margin-bottom: 32px; transition: all 0.4s cubic-bezier(0.25, 0.1, 0.25, 1);">ðŸŽ“</div>
            {% endif %}
        </div>
        
        <!-- Info Section -->
        <div style="padding: 52px; display: flex; flex-direction: column;">
            <!-- Stats Row -->
            <div style="display: flex; gap: 40px; margin-bottom: 32px; padding-bottom: 28px; border-bottom: 1px solid rgba(0,0,0,0.06);">
                <div style="display: flex; flex-direction: column;">
                    <span style="font-size: 1.8rem; font-weight: 700; color: #1d1d1f; letter-spacing: -0.02em;">{{ likes_count }}</span>
                    <span style="font-size: 0.75rem; text-transform: uppercase; letter-spacing: 0.08em; color: #86868b; margin-top: 4px;">{{ _('likes') }}</span>
                </div>
                {% if school.founded %}
                <div style="display: flex; flex-direction: column;">
                    <span style="font-size: 1.8rem; font-weight: 700; color: #1d1d1f; letter-spacing: -0.02em;">{{ school.founded }}</span>
                    <span style="font-size: 0.75rem; text-transform: uppercase; letter-spacing: 0.08em; color: #86868b; margin-top: 4px;">{{ _('founded') }}</span>
                </div>
                {% endif %}
                {% if school.region %}
                <div style="display: flex; flex-direction: column;">
                    <span style="font-size: 1.8rem; font-weight: 700; color: #1d1d1f; letter-spacing: -0.02em;">{{ school.region }}</span>
                    <span style="font-size: 0.75rem; text-transform: uppercase; letter-spacing: 0.08em; color: #86868b; margin-top: 4px;">{{ _('region') }}</span>
                </div>
                {% endif %}
            </div>
            
            <!-- Motto -->
            {% if school.motto %}
            <div style="background: linear-gradient(135deg, #1E3A5F 0%, #0D2137 100%); color: white; padding: 28px 32px; border-radius: 20px; margin-bottom: 28px; position: relative; overflow: hidden;">
                <p style="font-size: 0.7rem; text-transform: uppercase; letter-spacing: 0.12em; opacity: 0.7; margin-bottom: 10px; font-weight: 600;">{{ _('motto_label') }}</p>
                <p style="font-size: 1.15rem; font-style: italic; font-weight: 500; line-height: 1.5;">"{{ school.motto }}"</p>
            </div>
            {% endif %}
            
            <!-- Info Cards Grid -->
            <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 16px;">
                {% if school.district %}
                <div class="info-card" style="background: #f5f5f7; padding: 24px; border-radius: 16px; transition: all 0.3s cubic-bezier(0.25, 0.1, 0.25, 1); cursor: default;" onmouseover="this.style.transform='translateY(-4px)'; this.style.boxShadow='0 12px 32px rgba(0,0,0,0.08)';" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='none';">
                    <div style="width: 36px; height: 36px; background: white; border-radius: 10px; display: flex; align-items: center; justify-content: center; margin-bottom: 14px; box-shadow: 0 2px 8px rgba(0,0,0,0.04);">
                        <svg viewBox="0 0 24 24" fill="none" stroke="#1E3A5F" stroke-width="2" style="width: 18px; height: 18px;"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/><circle cx="12" cy="10" r="3"/></svg>
                    </div>
                    <p style="font-size: 0.7rem; text-transform: uppercase; letter-spacing: 0.08em; color: #86868b; margin-bottom: 6px; font-weight: 600;">{{ _('district') }}</p>
                    <p style="font-size: 0.95rem; color: #1d1d1f; font-weight: 600;">{{ school.district }}</p>
                </div>
                {% endif %}
                
                {% if school.address %}
                <div style="background: #f5f5f7; padding: 24px; border-radius: 16px; transition: all 0.25s ease;">
                    <div style="width: 36px; height: 36px; background: white; border-radius: 10px; display: flex; align-items: center; justify-content: center; margin-bottom: 14px; box-shadow: 0 2px 8px rgba(0,0,0,0.04);">
                        <svg viewBox="0 0 24 24" fill="none" stroke="#1E3A5F" stroke-width="2" style="width: 18px; height: 18px;"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/></svg>
                    </div>
                    <p style="font-size: 0.7rem; text-transform: uppercase; letter-spacing: 0.08em; color: #86868b; margin-bottom: 6px; font-weight: 600;">{{ _('address') }}</p>
                    <p style="font-size: 0.95rem; color: #1d1d1f; font-weight: 600;">{{ school.address }}</p>
                </div>
                {% endif %}
                
                {% if school.supervisor %}
                <div style="background: #f5f5f7; padding: 24px; border-radius: 16px; transition: all 0.25s ease;">
                    <div style="width: 36px; height: 36px; background: white; border-radius: 10px; display: flex; align-items: center; justify-content: center; margin-bottom: 14px; box-shadow: 0 2px 8px rgba(0,0,0,0.04);">
                        <svg viewBox="0 0 24 24" fill="none" stroke="#1E3A5F" stroke-width="2" style="width: 18px; height: 18px;"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/></svg>
                    </div>
                    <p style="font-size: 0.7rem; text-transform: uppercase; letter-spacing: 0.08em; color: #86868b; margin-bottom: 6px; font-weight: 600;">{{ _('supervisor') }}</p>
                    <p style="font-size: 0.95rem; color: #1d1d1f; font-weight: 600;">{{ school.supervisor }}</p>
                </div>
                {% endif %}
                
                {% if school.principal %}
                <div style="background: #f5f5f7; padding: 24px; border-radius: 16px; transition: all 0.25s ease;">
                    <div style="width: 36px; height: 36px; background: white; border-radius: 10px; display: flex; align-items: center; justify-content: center; margin-bottom: 14px; box-shadow: 0 2px 8px rgba(0,0,0,0.04);">
                        <svg viewBox="0 0 24 24" fill="none" stroke="#1E3A5F" stroke-width="2" style="width: 18px; height: 18px;"><path d="M12 3a6 6 0 0 0-6 6v0a6 6 0 0 0 6 6h0a6 6 0 0 0 6-6v0a6 6 0 0 0-6-6H12z"/></svg>
                    </div>
                    <p style="font-size: 0.7rem; text-transform: uppercase; letter-spacing: 0.08em; color: #86868b; margin-bottom: 6px; font-weight: 600;">{{ _('principal') }}</p>
                    <p style="font-size: 0.95rem; color: #1d1d1f; font-weight: 600;">{{ school.principal }}</p>
                </div>
                {% endif %}
                
                {% if school.phone %}
                <div style="background: #f5f5f7; padding: 24px; border-radius: 16px; transition: all 0.25s ease;">
                    <div style="width: 36px; height: 36px; background: white; border-radius: 10px; display: flex; align-items: center; justify-content: center; margin-bottom: 14px; box-shadow: 0 2px 8px rgba(0,0,0,0.04);">
                        <svg viewBox="0 0 24 24" fill="none" stroke="#1E3A5F" stroke-width="2" style="width: 18px; height: 18px;"><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11A8.8 8.8 0 0 1 3 12a2 2 0 0 1-2-2v-3"/></svg>
                    </div>
                    <p style="font-size: 0.7rem; text-transform: uppercase; letter-spacing: 0.08em; color: #86868b; margin-bottom: 6px; font-weight: 600;">{{ _('phone') }}</p>
                    <p style="font-size: 0.95rem; color: #1d1d1f; font-weight: 600;">{{ school.phone }}</p>
                </div>
                {% endif %}
                
                {% if school.gender %}
                <div style="background: #f5f5f7; padding: 24px; border-radius: 16px; transition: all 0.25s ease;">
                    <div style="width: 36px; height: 36px; background: white; border-radius: 10px; display: flex; align-items: center; justify-content: center; margin-bottom: 14px; box-shadow: 0 2px 8px rgba(0,0,0,0.04);">
                        <svg viewBox="0 0 24 24" fill="none" stroke="#1E3A5F" stroke-width="2" style="width: 18px; height: 18px;"><circle cx="12" cy="12" r="4"/><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>
                    </div>
                    <p style="font-size: 0.7rem; text-transform: uppercase; letter-spacing: 0.08em; color: #86868b; margin-bottom: 6px; font-weight: 600;">{{ _('gender_type') }}</p>
                    <p style="font-size: 0.95rem; color: #1d1d1f; font-weight: 600;">
                        {% if school.gender == 'CO-ED' %}{{ _('gender_coed') }}
                        {% elif school.gender == 'GIRLS' %}{{ _('gender_girls') }}
                        {% elif school.gender == 'BOYS' %}{{ _('gender_boys') }}
                        {% else %}{{ school.gender }}{% endif %}
                    </p>
                </div>
                {% endif %}
                
                {% if school.finance_type %}
                <div style="background: #f5f5f7; padding: 24px; border-radius: 16px; transition: all 0.25s ease;">
                    <div style="width: 36px; height: 36px; background: white; border-radius: 10px; display: flex; align-items: center; justify-content: center; margin-bottom: 14px; box-shadow: 0 2px 8px rgba(0,0,0,0.04);">
                        <svg viewBox="0 0 24 24" fill="none" stroke="#1E3A5F" stroke-width="2" style="width: 18px; height: 18px;"><line x1="12" y1="1" x2="12" y2="23"/><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/></svg>
                    </div>
                    <p style="font-size: 0.7rem; text-transform: uppercase; letter-spacing: 0.08em; color: #86868b; margin-bottom: 6px; font-weight: 600;">{{ _('finance_type') }}</p>
                    <p style="font-size: 0.95rem; color: #1d1d1f; font-weight: 600;">
                        {% if school.finance_type == 'Government' %}{{ _('finance_government') }}
                        {% elif school.finance_type == 'Aided' %}{{ _('finance_aided') }}
                        {% elif school.finance_type == 'Direct' %}{{ _('finance_direct') }}
                        {% elif school.finance_type == 'Private' %}{{ _('finance_private') }}
                        {% elif school.finance_type == 'ESF' %}è‹±åŸº
                        {% else %}{{ school.finance_type }}{% endif %}
                    </p>
                </div>
                {% endif %}
                
                {% if school.session_type %}
                <div style="background: #f5f5f7; padding: 24px; border-radius: 16px; transition: all 0.25s ease;">
                    <div style="width: 36px; height: 36px; background: white; border-radius: 10px; display: flex; align-items: center; justify-content: center; margin-bottom: 14px; box-shadow: 0 2px 8px rgba(0,0,0,0.04);">
                        <svg viewBox="0 0 24 24" fill="none" stroke="#1E3A5F" stroke-width="2" style="width: 18px; height: 18px;"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>
                    </div>
                    <p style="font-size: 0.7rem; text-transform: uppercase; letter-spacing: 0.08em; color: #86868b; margin-bottom: 6px; font-weight: 600;">{{ _('session_type') }}</p>
                    <p style="font-size: 0.95rem; color: #1d1d1f; font-weight: 600;">
                        {% if school.session_type == 'WD' %}{{ _('session_wd') }}
                        {% elif school.session_type == 'AM' %}{{ _('session_am') }}
                        {% elif school.session_type == 'PM' %}{{ _('session_pm') }}
                        {% else %}{{ school.session_type }}{% endif %}
                    </p>
                </div>
                {% endif %}
                
                {% if school.website %}
                <div style="background: #f5f5f7; padding: 24px; border-radius: 16px; transition: all 0.25s ease;">
                    <div style="width: 36px; height: 36px; background: white; border-radius: 10px; display: flex; align-items: center; justify-content: center; margin-bottom: 14px; box-shadow: 0 2px 8px rgba(0,0,0,0.04);">
                        <svg viewBox="0 0 24 24" fill="none" stroke="#1E3A5F" stroke-width="2" style="width: 18px; height: 18px;"><circle cx="12" cy="12" r="10"/><line x1="2" y1="12" x2="22" y2="12"/><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/></svg>
                    </div>
                    <p style="font-size: 0.7rem; text-transform: uppercase; letter-spacing: 0.08em; color: #86868b; margin-bottom: 6px; font-weight: 600;">{{ _('website') }}</p>
                    <a href="{{ school.website }}" target="_blank" style="font-size: 0.95rem; color: #007AFF; font-weight: 600;">{{ _('visit_website') }} â†’</a>
                </div>
                {% endif %}
                
                {% if school.school_code %}
                <div style="background: #f5f5f7; padding: 24px; border-radius: 16px; transition: all 0.25s ease;">
                    <div style="width: 36px; height: 36px; background: white; border-radius: 10px; display: flex; align-items: center; justify-content: center; margin-bottom: 14px; box-shadow: 0 2px 8px rgba(0,0,0,0.04);">
                        <svg viewBox="0 0 24 24" fill="none" stroke="#1E3A5F" stroke-width="2" style="width: 18px; height: 18px;"><rect x="3" y="3" width="18" height="18" rx="2"/><path d="M3 9h18"/></svg>
                    </div>
                    <p style="font-size: 0.7rem; text-transform: uppercase; letter-spacing: 0.08em; color: #86868b; margin-bottom: 6px; font-weight: 600;">{{ _('school_code') }}</p>
                    <p style="font-size: 0.95rem; color: #1d1d1f; font-weight: 600;">{{ school.school_code }}</p>
                </div>
                {% endif %}
                
                {% if school.school_type %}
                <div style="background: #f5f5f7; padding: 24px; border-radius: 16px; transition: all 0.25s ease;">
                    <div style="width: 36px; height: 36px; background: white; border-radius: 10px; display: flex; align-items: center; justify-content: center; margin-bottom: 14px; box-shadow: 0 2px 8px rgba(0,0,0,0.04);">
                        <svg viewBox="0 0 24 24" fill="none" stroke="#1E3A5F" stroke-width="2" style="width: 18px; height: 18px;"><path d="M22 10v6M2 10l10-5 10 5-10 5z"/><path d="M6 12v5c0 2 2 3 6 3s6-1 6-3v-5"/></svg>
                    </div>
                    <p style="font-size: 0.7rem; text-transform: uppercase; letter-spacing: 0.08em; color: #86868b; margin-bottom: 6px; font-weight: 600;">{{ _('school_type') }}</p>
                    <p style="font-size: 0.95rem; color: #1d1d1f; font-weight: 600;">{{ school.school_type }}</p>
                </div>
                {% endif %}
                
                {% if school.fax %}
                <div style="background: #f5f5f7; padding: 24px; border-radius: 16px; transition: all 0.25s ease;">
                    <div style="width: 36px; height: 36px; background: white; border-radius: 10px; display: flex; align-items: center; justify-content: center; margin-bottom: 14px; box-shadow: 0 2px 8px rgba(0,0,0,0.04);">
                        <svg viewBox="0 0 24 24" fill="none" stroke="#1E3A5F" stroke-width="2" style="width: 18px; height: 18px;"><path d="M6 8h12a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2z"/><path d="M6 8v2a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V8"/><line x1="2" y1="12" x2="22" y2="12"/></svg>
                    </div>
                    <p style="font-size: 0.7rem; text-transform: uppercase; letter-spacing: 0.08em; color: #86868b; margin-bottom: 6px; font-weight: 600;">{{ _('fax') }}</p>
                    <p style="font-size: 0.95rem; color: #1d1d1f; font-weight: 600;">{{ school.fax }}</p>
                </div>
                {% endif %}
            </div>
            
            {% if school.website %}
            <a href="{{ school.website }}" target="_blank" style="display: inline-flex; align-items: center; gap: 12px; padding: 18px 36px; background: linear-gradient(135deg, #1E3A5F 0%, #0D2137 100%); color: white; border-radius: 20px; font-weight: 700; text-decoration: none; margin-top: 28px; box-shadow: 0 8px 24px rgba(30, 58, 95, 0.3); width: fit-content;">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="width: 20px; height: 20px;"><circle cx="12" cy="12" r="10"/><line x1="2" y1="12" x2="22" y2="12"/><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/></svg>
                {{ _('visit_website_full').format(school.name) }}
            </a>
            {% endif %}
        </div>
    </div>
    
    <!-- Google Maps -->
    {% if school.address %}
    <div style="background: white; border-radius: 24px; overflow: hidden; box-shadow: 0 4px 24px rgba(0,0,0,0.04), 0 1px 2px rgba(0,0,0,0.02); margin-top: 40px;">
        <div style="display: flex; align-items: center; gap: 12px; padding: 24px 28px; border-bottom: 1px solid rgba(0,0,0,0.06); font-weight: 700; font-size: 1rem;">
            <svg viewBox="0 0 24 24" fill="none" stroke="#1E3A5F" stroke-width="2" style="width: 24px; height: 24px;"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/><circle cx="12" cy="10" r="3"/></svg>
            {{ school.address }}, {{ school.city }}, {{ school.country }}
        </div>
        <div style="height: 320px;">
            <iframe width="100%" height="100%" style="border: 0;" loading="lazy" allowfullscreen referrerpolicy="no-referrer-when-downgrade" src="https://www.google.com/maps/embed?hl={{ current_lang }}&q={{ (school.address ~ ', ' ~ school.city ~ ', ' ~ school.country) | urlencode }}&zoom=16&maptype=roadmap"></iframe>
        </div>
        <a href="https://www.google.com/maps/search/?api=1&query={{ (school.address ~ ', ' ~ school.city ~ ', ' ~ school.country) | urlencode }}" target="_blank" style="display: flex; align-items: center; gap: 8px; padding: 20px 28px; background: #f5f5f7; color: #1E3A5F; text-decoration: none; font-weight: 600; font-size: 0.9rem; transition: all 0.2s ease;">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="width: 18px; height: 18px;"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/><polyline points="15 3 21 3 21 9"/><line x1="10" y1="14" x2="21" y2="3"/></svg>
            {{ _('view_on_maps') }}
        </a>
    </div>
    {% endif %}
</div>

<script>
function downloadBadge() {
    const link = document.createElement('a');
    link.href = '{{ school.badge_url or url_for("static", filename="images/placeholder.png") }}';
    link.download = '{{ school.name }}_badge.png';
    document.body.appendChild(link);
    link.click();
    document.body.removeChild(link);
}
</script>
{% endblock %}
