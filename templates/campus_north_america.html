<!DOCTYPE html>
<html lang="{{ current_lang }}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ _('Explore Global Universities') }} - {{ _('North America') }}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/campus.css') }}">
    <link href="https://fonts.googleapis.com/css2?family=SF+Pro+Display:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body class="campus-gallery">
    <!-- Navigation -->
    <nav class="navbar">
        <div class="container">
            <a href="{{ url_for('index') }}" class="logo">
                <img src="{{ url_for('static', filename='images/logo-horizontal.svg') }}" alt="校徽网">
            </a>
            <div class="nav-links">
                <a href="{{ url_for('index') }}">{{ _('home') }}</a>
                <a href="#" class="active">{{ _('campus_gallery') }}</a>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="hero">
        <div class="container">
            <h1>{{ _('North American Universities') }}</h1>
            <p>{{ _('Explore prestigious institutions across the United States and Canada') }}</p>
        </div>
    </section>

    <!-- Campus Gallery Grid -->
    <section class="gallery-section">
        <div class="container">
            <div class="gallery-grid">
                {% for school in schools %}
                <article class="campus-card" data-university="{{ school.name }}" onclick="window.location.href='{{ url_for('school_detail', school_id=school.id) }}'" style="cursor: pointer;">
                    <div class="card-image">
                        {% if school.campus_image %}
                        <img src="{{ school.campus_image }}" 
                             alt="{{ school.name }}"
                             loading="lazy"
                             onerror="this.src='{{ url_for('static', filename='images/campus-placeholder.svg') }}">
                        {% else %}
                        <div class="image-placeholder">
                            <svg viewBox="0 0 100 100" fill="none">
                                <rect fill="#f5f5f7" width="100" height="100"/>
                                <path d="M45 35c-5.5 0-10 4.5-10 10s4.5 10 10 10 10-4.5 10-10-4.5-10-10-10zm0 17.5c-4.1 0-7.5-3.4-7.5-7.5s3.4-7.5 7.5-7.5 7.5 3.4 7.5 7.5-3.4 7.5-7.5 7.5zM70 65H30c-2.8 0-5-2.2-5-5v-2c0-2.8 2.2-5 5-5h40c2.8 0 5 2.2 5 5v2c0 2.8-2.2 5-5 5z" fill="#86868b"/>
                            </svg>
                        </div>
                        {% endif %}
                        <div class="image-overlay">
                            <span class="view-label">{{ _('View Campus') }}</span>
                        </div>
                    </div>
                    <div class="card-content">
                        <div class="card-header">
                            <h2>{{ school.name_cn or school.name }}</h2>
                            <span class="location">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0118 0z"/>
                                    <circle cx="12" cy="10" r="3"/>
                                </svg>
                                {{ school.city }}, {{ school.country }}
                            </span>
                        </div>
                        <p class="english-name">{{ school.name }}</p>
                        {% if school.campus_image_desc %}
                        <p class="image-caption">{{ school.campus_image_desc }}</p>
                        {% endif %}
                        <div class="card-meta">
                            {% if school.founded %}
                            <span class="founded">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
                                    <line x1="16" y1="2" x2="16" y2="6"/>
                                    <line x1="8" y1="2" x2="8" y2="6"/>
                                    <line x1="3" y1="10" x2="21" y2="10"/>
                                </svg>
                                {{ school.founded }}
                            </span>
                            {% endif %}
                            {% if school.motto %}
                            <span class="motto" title="{{ school.motto }}">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M4 19.5A2.5 2.5 0 016.5 17H20"/>
                                    <path d="M6.5 2H20v20H6.5A2.5 2.5 0 014 19.5v-15A2.5 2.5 0 016.5 2z"/>
                                </svg>
                                {{ school.motto[:30] }}...
                            </span>
                            {% endif %}
                        </div>
                    </div>
                </article>
                {% endfor %}
            </div>
        </div>
    </section>

    <!-- Lightbox Modal -->
    <div class="lightbox" id="lightbox">
        <button class="close-btn" aria-label="Close">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <line x1="18" y1="6" x2="6" y2="18"/>
                <line x1="6" y1="6" x2="18" y2="18"/>
            </svg>
        </button>
        <div class="lightbox-content">
            <img src="" alt="" id="lightbox-image">
            <div class="lightbox-info">
                <h3 id="lightbox-title"></h3>
                <p id="lightbox-desc"></p>
            </div>
        </div>
    </div>

    <script>
    document.addEventListener('DOMContentLoaded', function() {
        // Lightbox functionality - only for images, not cards
        const images = document.querySelectorAll('.card-image img');
        const lightbox = document.getElementById('lightbox');
        const lightboxImage = document.getElementById('lightbox-image');
        const lightboxTitle = document.getElementById('lightbox-title');
        const lightboxDesc = document.getElementById('lightbox-desc');
        const closeBtn = document.querySelector('.close-btn');

        images.forEach(img => {
            img.addEventListener('click', (e) => {
                e.stopPropagation();
                if (img.src && !img.parentElement.classList.contains('image-placeholder')) {
                    lightboxImage.src = img.src;
                    lightboxTitle.textContent = img.alt || '';
                    lightbox.classList.add('active');
                    document.body.style.overflow = 'hidden';
                }
            });
        });

        closeBtn.addEventListener('click', () => {
            lightbox.classList.remove('active');
            document.body.style.overflow = '';
        });

        lightbox.addEventListener('click', (e) => {
            if (e.target === lightbox) {
                lightbox.classList.remove('active');
                document.body.style.overflow = '';
            }
        });

        // Keyboard navigation
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape' && lightbox.classList.contains('active')) {
                lightbox.classList.remove('active');
                document.body.style.overflow = '';
            }
        });
    });
    </script>
</body>
</html>
