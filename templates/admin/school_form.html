{% extends "admin/base.html" %}

{% block title %}{{ school and _('edit_school') or _('add_school') }} - {{ _('admin_panel') }}{% endblock %}

{% block content %}
<div class="admin-header animate-in">
    <div>
        <h1>{{ school and _('edit_school') or _('add_school') }}</h1>
        <p>{{ '编辑学校信息' if school else '添加新学校' }}</p>
    </div>
    <div class="admin-header-actions">
        <a href="{{ url_for('admin_schools') }}" class="btn btn-secondary">
            <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2">
                <line x1="19" y1="12" x2="5" y2="12"/>
                <polyline points="12 19 5 12 12 5"/>
            </svg>
            返回列表
        </a>
    </div>
</div>

<form method="POST" class="card animate-in">
    <div class="card-body">
        <div class="form-grid">
            <div class="form-group">
                <label for="name">{{ _('school_name') }} *</label>
                <input type="text" id="name" name="name" value="{{ school.name or '' }}" required placeholder="请输入学校英文名称">
            </div>
            
            <div class="form-group">
                <label for="name_cn">{{ _('school_name_cn') }}</label>
                <input type="text" id="name_cn" name="name_cn" value="{{ school.name_cn or '' }}" placeholder="请输入学校中文名称">
            </div>
            
            <div class="form-group">
                <label for="region">{{ _('region') }} *</label>
                <select id="region" name="region" required>
                    <option value="">请选择地区</option>
                    {% for region in regions %}
                        <option value="{{ region }}" {% if school and school.region == region %}selected{% endif %}>
                            {{ region }}
                        </option>
                    {% endfor %}
                </select>
            </div>
            
            <div class="form-group">
                <label for="country">{{ _('country') }} *</label>
                <input type="text" id="country" name="country" value="{{ school.country or '' }}" required placeholder="请输入国家">
            </div>
            
            <div class="form-group">
                <label for="city">{{ _('city') }} *</label>
                <input type="text" id="city" name="city" value="{{ school.city or '' }}" required placeholder="请输入城市">
            </div>
            
            <div class="form-group">
                <label for="address">{{ _('address') }}</label>
                <input type="text" id="address" name="address" value="{{ school.address or '' }}" placeholder="请输入详细地址">
            </div>
            
            <div class="form-group">
                <label for="level">{{ _('type') }} *</label>
                <select id="level" name="level" required>
                    <option value="">请选择类型</option>
                    <option value="university" {% if school and school.level == 'university' %}selected{% endif %}>大学</option>
                    <option value="middle" {% if school and school.level == 'middle' %}selected{% endif %}>中学</option>
                    <option value="primary" {% if school and school.level == 'primary' %}selected{% endif %}>小学</option>
                    <option value="kindergarten" {% if school and school.level == 'kindergarten' %}selected{% endif %}>幼儿园</option>
                    <option value="elementary" {% if school and school.level == 'elementary' %}selected{% endif %}>特殊学校</option>
                </select>
            </div>
            
            <div class="form-group">
                <label for="finance_type">办学类型</label>
                <select id="finance_type" name="finance_type">
                    <option value="">请选择</option>
                    <option value="Government" {% if school and school.finance_type == 'Government' %}selected{% endif %}>官立</option>
                    <option value="Aided" {% if school and school.finance_type == 'Aided' %}selected{% endif %}>资助</option>
                    <option value="Direct" {% if school and school.finance_type == 'Direct' %}selected{% endif %}>直资</option>
                    <option value="Private" {% if school and school.finance_type == 'Private' %}selected{% endif %}>私立</option>
                    <option value="ESF" {% if school and school.finance_type == 'ESF' %}selected{% endif %}>英基</option>
                </select>
            </div>
            
            <div class="form-group">
                <label for="gender">性别类型</label>
                <select id="gender" name="gender">
                    <option value="">请选择</option>
                    <option value="CO-ED" {% if school and school.gender == 'CO-ED' %}selected{% endif %}>男女校</option>
                    <option value="GIRLS" {% if school and school.gender == 'GIRLS' %}selected{% endif %}>女校</option>
                    <option value="BOYS" {% if school and school.gender == 'BOYS' %}selected{% endif %}>男校</option>
                </select>
            </div>
            
            <div class="form-group">
                <label for="website">{{ _('website') }}</label>
                <input type="url" id="website" name="website" value="{{ school.website or '' }}" placeholder="https://example.com">
            </div>
            
            <div class="form-group">
                <label for="badge_url">校徽URL</label>
                <input type="url" id="badge_url" name="badge_url" value="{{ school.badge_url or '' }}" placeholder="https://example.com/badge.svg">
            </div>
            
            <div class="form-group">
                <label for="motto">校训</label>
                <input type="text" id="motto" name="motto" value="{{ school.motto or '' }}" placeholder="请输入校训">
            </div>
            
            <div class="form-group">
                <label for="founded">建校年份</label>
                <input type="number" id="founded" name="founded" value="{{ school.founded or '' }}" placeholder="如: 1911" min="1800" max="2030">
            </div>
            
            <div class="form-group full-width">
                <label for="notes">备注</label>
                <textarea id="notes" name="notes" rows="4" placeholder="其他信息...">{{ school.notes or '' }}</textarea>
            </div>
        </div>
        
        <div class="form-actions">
            <button type="submit" class="btn btn-primary">
                <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2">
                    <polyline points="20 6 9 17 4 12"/>
                </svg>
                {{ '保存修改' if school else '添加学校' }}
            </button>
            <a href="{{ url_for('admin_schools') }}" class="btn btn-secondary">取消</a>
        </div>
    </div>
</form>
{% endblock %}
