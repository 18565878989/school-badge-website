{% extends "admin/base.html" %}

{% block title %}{{ _('dashboard') }} - {{ _('admin_panel') }}{% endblock %}

{% block content %}
<div class="admin-header">
    <h1>{{ _('welcome_admin') }}</h1>
    <p>{{ _('admin_panel') }}</p>
</div>

<div class="stats-grid">
    <div class="stat-card">
        <div class="stat-icon">ğŸ«</div>
        <div class="stat-info">
            <p class="stat-value">{{ stats.total_schools }}</p>
            <p class="stat-label">{{ _('total_schools') }}</p>
        </div>
    </div>
    <div class="stat-card">
        <div class="stat-icon">ğŸ‘¥</div>
        <div class="stat-info">
            <p class="stat-value">{{ stats.total_users }}</p>
            <p class="stat-label">{{ _('total_users') }}</p>
        </div>
    </div>
    <div class="stat-card">
        <div class="stat-icon">ğŸŒ</div>
        <div class="stat-info">
            <p class="stat-value">{{ stats.total_regions }}</p>
            <p class="stat-label">åœ°åŒºæ€»æ•°</p>
        </div>
    </div>
</div>

<div class="admin-sections">
    <div class="admin-section">
        <div class="section-header">
            <h2>æœ€è¿‘æ·»åŠ çš„å­¦æ ¡</h2>
            <a href="{{ url_for('admin_schools') }}" class="btn btn-primary btn-sm">æŸ¥çœ‹å…¨éƒ¨</a>
        </div>
        <table class="admin-table">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>å­¦æ ¡åç§°</th>
                    <th>åœ°åŒº</th>
                    <th>ç±»å‹</th>
                </tr>
            </thead>
            <tbody>
                {% for school in recent_schools %}
                <tr>
                    <td>{{ school.id }}</td>
                    <td>
                        <a href="{{ url_for('school_detail', school_id=school.id) }}" target="_blank">
                            {{ school.name }}
                        </a>
                    </td>
                    <td>{{ school.region }}</td>
                    <td>
                        <span class="level-badge level-{{ school.level }}">
                            {% if school.level == 'university' %}å¤§å­¦
                            {% elif school.level == 'middle' %}ä¸­å­¦
                            {% elif school.level == 'elementary' %}å°å­¦
                            {% else %}å¹¼å„¿å›­{% endif %}
                        </span>
                    </td>
                </tr>
                {% else %}
                <tr>
                    <td colspan="4" class="empty">æš‚æ— æ•°æ®</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    
    <div class="admin-section">
        <div class="section-header">
            <h2>æœ€è¿‘æ³¨å†Œçš„ç”¨æˆ·</h2>
            <a href="{{ url_for('admin_users') }}" class="btn btn-primary btn-sm">æŸ¥çœ‹å…¨éƒ¨</a>
        </div>
        <table class="admin-table">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>ç”¨æˆ·å</th>
                    <th>é‚®ç®±</th>
                    <th>è§’è‰²</th>
                </tr>
            </thead>
            <tbody>
                {% for user in recent_users %}
                <tr>
                    <td>{{ user.id }}</td>
                    <td>{{ user.username }}</td>
                    <td>{{ user.email }}</td>
                    <td>
                        {% if user.role == 'admin' %}
                            <span class="badge badge-admin">ç®¡ç†å‘˜</span>
                        {% else %}
                            <span class="badge badge-user">ç”¨æˆ·</span>
                        {% endif %}
                    </td>
                </tr>
                {% else %}
                <tr>
                    <td colspan="4" class="empty">æš‚æ— æ•°æ®</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>

<div class="quick-actions">
    <h2>å¿«æ·æ“ä½œ</h2>
    <div class="action-buttons">
        <a href="{{ url_for('admin_add_school') }}" class="btn btn-primary">
            â• {{ _('add_school') }}
        </a>
        <a href="{{ url_for('admin_users') }}" class="btn btn-secondary">
            ğŸ‘¥ {{ _('manage_users') }}
        </a>
        <a href="{{ url_for('index') }}" class="btn btn-secondary" target="_blank">
            ğŸŒ {{ _('home') }}
        </a>
    </div>
</div>
{% endblock %}
